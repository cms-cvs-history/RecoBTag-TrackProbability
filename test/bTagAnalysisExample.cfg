process Demo =  {
  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
   untracked vstring fileNames = {
 #'file:/data/arizzi/10ACFB76-1E85-DB11-9F48-001731AF68B9.root'
 #'file:/data/arizzi/60464522-D783-DB11-9644-00304870D47B.root'
 #b
# '/store/RelVal/2006/12/16/RelVal120BJets50-120/0000/00D1599A-578D-DB11-8741-001731AF68C7.root'
 #udsg
 '/store/RelVal/2006/12/16/RelVal120QCD_pt50_80/0000/0CF432F0-588D-DB11-87DA-001731AF6931.root',
 '/store/RelVal/2006/12/16/RelVal120QCD_pt50_80/0000/E6442E8E-588D-DB11-862B-003048767ED1.root', 
 '/store/RelVal/2006/12/16/RelVal120QCD_pt80_120/0000/DE092CFB-588D-DB11-8934-001731A2832D.root',
 '/store/RelVal/2006/12/16/RelVal120QCD_pt80_120/0000/F65117F6-588D-DB11-94DB-003048767D3D.root'
 }
     untracked int32  maxEvents     = -1
  }

    module trackProbabilityJetTagsTest = TrackProbability {
      string jetTracks = "jetTracksAssociator"
      string primaryVertex = "offlinePrimaryVerticesFromCTFTracks"
      PSet AlgorithmPSet =  {
         int32    ImpactParamterType = 0
         int32    MinimumNumberOfPixelHits = 2
         int32   MinimumNumberOfHits = 8
         double MaximumTransverseImpactParameter = 0.2
         double MinimumTransverseMomentum = 1.0
         double MaximumDecayLength = 5.0
         double MaximumChiSquared = 5.0
         double MaximumLongitudinalImpactParameter = 170.0
         double MaximumDistanceToJetAxis = 0.07
         double MinimumProbability = 0.005
      }
    }
include "CondCore/DBCommon/data/PoolDBCommon.cfi"
replace PoolDBCommon.connect = "sqlite_http://arizzi.web.cern.ch/arizzi/btag_std.db"
replace PoolDBCommon.catalog = "file:mycatalog.xml"
#replace PoolDBCommon.messagelevel = 3
        es_source = PoolDBESSource {
                                  using PoolDBCommon
                                  VPSet toGet = {
                                   {string record = "BTagTrackProbabilityRcd"
                                     string tag = "probBTagPDF_tag"
                                    } }
                                   }

    
     # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"

    include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
#    include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cff"
    module tkprob = TrackProbabilityAnalyzer {   }

     module out = PoolOutputModule {
        untracked string fileName = '/tmp/arizzi/btag.root'
    }

 
  include "RecoBTag/Analysis/data/bTagTrackProbabilityAnalysis.cfi"
  path p = {trackProbabilityJetTagsTest, bTagTrackProbabilityAnalysis } 

  //    endpath outpath = { out }

}
