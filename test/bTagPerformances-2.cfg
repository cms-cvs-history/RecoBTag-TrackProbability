process Demo =  {
  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
   untracked vstring fileNames = {
 #'file:/data/arizzi/10ACFB76-1E85-DB11-9F48-001731AF68B9.root'
 #'file:/data/arizzi/60464522-D783-DB11-9644-00304870D47B.root'
 #b
# '/store/RelVal/2006/12/16/RelVal120BJets50-120/0000/00D1599A-578D-DB11-8741-001731AF68C7.root'
 #udsg
# '/store/RelVal/2006/12/16/RelVal120QCD_pt50_80/0000/0CF432F0-588D-DB11-87DA-001731AF6931.root',
# '/store/RelVal/2006/12/16/RelVal120QCD_pt50_80/0000/E6442E8E-588D-DB11-862B-003048767ED1.root', 
# '/store/RelVal/2006/12/16/RelVal120QCD_pt80_120/0000/DE092CFB-588D-DB11-8934-001731A2832D.root',
# '/store/RelVal/2006/12/16/RelVal120QCD_pt80_120/0000/F65117F6-588D-DB11-94DB-003048767D3D.root'
#  'file:/data/arizzi/reco-B.root'
#'rfio:/castor/cern.ch/user/f/fpschill/btag/RelVal120QCD_pt50_80.CMSSW_1_3_0_pre3.root',
#'rfio:/castor/cern.ch/user/f/fpschill/btag/RelVal120QCD_pt80_120.CMSSW_1_3_0_pre3.root'
'rfio:/castor/cern.ch/user/f/fpschill/btag/RelVal120BJets50-120.CMSSW_1_3_0_pre3.root'
#'rfio:/castor/cern.ch/user/f/fpschill/btag/RelVal120CJets50-120.CMSSW_1_3_0_pre3.root'
 }
     untracked int32  maxEvents     = -1
  }




### Begin of DB config #######################################################
### comment the following (or set UseDB to false) to use XML instead of DB
replace trackProbabilityJetTags.UseDB = false
include "CondCore/DBCommon/data/CondDBCommon.cfi"
replace CondDBCommon.connect = "oracle://devdb10/CMS_COND_BTAG"
replace CondDBCommon.catalog = "relationalcatalog_oracle://devdb10/CMS_COND_GENERAL"
        es_source = PoolDBESSource {
                                  using CondDBCommon
                                 VPSet toGet = {
                                   {string record = "BTagTrackProbability2DRcd"
                                     string tag = "probBTagPDF2D_130pre4_new_10k_tag"    },
                                   {string record = "BTagTrackProbability3DRcd"
                                     string tag = "probBTagPDF3D_130pre4_new_10k_tag"    }
                                   }
                                     PSet DBParameters = {
                                                   untracked string  authenticationPath="/afs/cern.ch/cms/DB/conddb"
                                                   untracked int32 messageLevel=0
                                                   untracked bool loadBlobStreamer = true
                                                }
                                 }
##### End of DB config #######################################################
    


     # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
#    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"

    include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
    include "RecoBTag/TrackProbability/data/trackProbability.cfi"

     module out = PoolOutputModule {
        untracked string fileName = '/tmp/arizzi/btag.root'
    }

 
  include "RecoBTag/Analysis/data/bTagTrackProbabilityAnalysis.cfi"
  
#replace bTagTrackProbabilityAnalysis.update = false
#replace bTagTrackProbabilityAnalysis.inputfile = ""
#replace bTagTrackProbabilityAnalysis.rootfile = "qcd.root"  # output

replace bTagTrackProbabilityAnalysis.update = true

replace bTagTrackProbabilityAnalysis.inputfile = "qcd.root"
replace bTagTrackProbabilityAnalysis.rootfile = "qcd+b.root"  # output

# replace bTagTrackProbabilityAnalysis.inputfile = "qcd+b"
# replace bTagTrackProbabilityAnalysis.rootfile = "qdc+b+c.root"  # output

  replace bTagTrackProbabilityAnalysis.moduleLabel = "trackProbabilityJetTags"

  path p = {trackProbabilityJetTags,bTagTrackProbabilityAnalysis } 

  //    endpath outpath = { out }

}
