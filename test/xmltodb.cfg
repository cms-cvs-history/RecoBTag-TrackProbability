#! /bin/env cmsRun

process analyzer = {

    # input file

    source = EmptySource {untracked int32 maxEvents = 10 untracked uint32 firstRun=1 untracked uint32 numberEventsInRun=1}

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"

    # Test tracks to jets association
    module xmltodb = TrackProbabilityXMLtoDB {
    }

      service = PoolDBOutputService
      {
         string connect = "sqlite_file:btagnew.db"    
           string timetype = "runnumber"    
           untracked uint32 authenticationMethod = 1
           untracked string catalog = "file:mycatalog.xml"
           untracked bool loadBlobStreamer = true
         VPSet toPut=
           {
             {
              string record = "BTagTrackProbability2DRcd"
              string tag ="probBTagPDF2D_tag"
             },
             {
              string record = "BTagTrackProbability3DRcd"
              string tag ="probBTagPDF3D_tag"
             }
           }
       PSet DBParameters = {
           untracked string authenticationPath="."
           untracked int32 messageLevel=0
       }
     }

    # module execution
    path p = { xmltodb }

}
